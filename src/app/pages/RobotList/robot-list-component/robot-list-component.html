<div class="p-6 space-y-6">
  <div class="overflow-x-auto rounded-xl border border-gray-200 shadow-md">
    <p-table
      #robotTable
      [value]="robots ?? []"
      [paginator]="true"
      [rows]="rows"
      [globalFilterFields]="['id', 'state', 'soc', 'soh', 'cycles']"
      [stripedRows]="true"
      [rowHover]="true"
      [showGridlines]="false"
      responsiveLayout="scroll"
    >
      <!-- Header -->
      <ng-template pTemplate="header">
        <tr class="bg-gray-100 text-gray-700">
          <th class="py-3 px-3 text-left" pSortableColumn="id">
            Robot <p-sortIcon field="id"></p-sortIcon>
          </th>
          <th class="py-3 px-3 text-left" pSortableColumn="state">
            State <p-sortIcon field="state"></p-sortIcon>
          </th>
          <th class="py-3 px-3 text-left" pSortableColumn="soc">
            SoC % <p-sortIcon field="soc"></p-sortIcon>
          </th>
          <th class="py-3 px-3 text-left" pSortableColumn="soh">
            SoH % <p-sortIcon field="soh"></p-sortIcon>
          </th>
          <th class="py-3 px-3 text-left" pSortableColumn="cycles">
            Cycles <p-sortIcon field="cycles"></p-sortIcon>
          </th>
        </tr>
      </ng-template>

      <!-- Body -->
      <ng-template pTemplate="body" let-robot>
        <tr
          class="cursor-pointer hover:bg-blue-50 dark:hover:bg-blue-900/30 transition text-sm sm:text-base"
          (click)="goToDetails(robot.id)"
        >
          <td class="py-2 px-3">{{ robot.id }}</td>
          <td class="py-2 px-3">{{ robot.state }}</td>
          <td class="py-2 px-3">{{ robot.soc }}</td>
          <td class="py-2 px-3">{{ robot.soh }}</td>
          <td class="py-2 px-3">{{ robot.cycles }}</td>
        </tr>
      </ng-template>

      <!-- Custom paginator -->
      <ng-template pTemplate="paginatorleft">
        <span class="text-gray-500 text-sm">Rows per page:</span>
      </ng-template>

      <ng-template pTemplate="paginatorright">
        <p-select
          [options]="rowsOptions"
          [(ngModel)]="rows"
          (onChange)="onRowsPerPageChange($event.value, robotTable)"
          [appendTo]="'body'"
          class="w-28"
          placeholder="Rows"
        ></p-select>
      </ng-template>

      <!-- Empty message -->
      <ng-template pTemplate="emptymessage">
        <tr>
          <td colspan="6" class="text-center text-gray-400 py-4">
            No robots found.
          </td>
        </tr>
      </ng-template>
    </p-table>
  </div>

  <!-- Optional telemetry and alerts section -->
  <!--
  <div class="grid grid-cols-12 gap-4">
    <p-card class="col-span-12">
      <h3 class="font-semibold mb-2">Robots</h3>
      <p-table [value]="robots" class="text-sm" selectionMode="single" [(selection)]="selectedRobot">
        <ng-template pTemplate="header">
          <tr>
            <th>Robot</th><th>State</th><th>SoC %</th><th>SoH %</th><th>Cycles</th>
          </tr>
        </ng-template>
        <ng-template pTemplate="body" let-r>
          <tr [pSelectableRow]="r">
            <td>{{ r.id }}</td><td>{{ r.state }}</td><td>{{ r.soc }}</td><td>{{ r.soh }}</td><td>{{ r.cycles }}</td>
          </tr>
        </ng-template>
      </p-table>
    </p-card>

    <p-card class="col-span-8">
      <h3 class="font-semibold mb-2">Robot Telemetry</h3>
      <p class="text-gray-500 text-sm mb-2">Select a robot to load its telemetry data</p>
      <canvas id="robotTelemetryChart" height="200"></canvas>
    </p-card>

    <p-card class="col-span-4">
      <h3 class="font-semibold mb-2">Alerts</h3>
      <div *ngFor="let alert of alerts" class="mb-2 text-sm p-2 rounded bg-red-50 text-red-700">
        {{ alert }}
      </div>
      <div class="text-gray-500 text-xs">{{ powerNow }}</div>
    </p-card>
  </div>
  -->
</div>
